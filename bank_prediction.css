/* bank_prediction.css */

/* --- 關鍵修正 1: 覆蓋 style.css 的全域設定 --- */
/* 這是讓右側能填滿的關鍵，解除原本的主內容 Grid 限制 */
.main-content {
    display: block !important; 
    width: 100%;
    max-width: 100%;
    padding: 40px;
}

/* --- 佈局系統 (Dashboard Layout) --- */
.dashboard-layout {
    display: grid;
    /* 左側固定 320px，右側自動填滿 (使用 minmax 防止溢出) */
    grid-template-columns: 320px minmax(0, 1fr); 
    gap: 30px; /* 增加一點間距讓畫面更舒適 */
    align-items: start;
    width: 100%;
    margin-bottom: 20px; /* 增加一點底部距離，避免區塊太擠 */
}

/* 左側欄位 */
.layout-left {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* --- 關鍵修正 2: 右側欄位容器 --- */
.layout-right {
    display: flex;
    flex-direction: column; /* 確保內部區塊上下排列 */
    gap: 25px;
    width: 100%;            /* 強制佔滿剩餘空間 */
    min-width: 0;          /* 防止 Flex 子元素內容過長導致破版 */
}

/* --- 關鍵修正 3: 結果區塊 (預測結果 + SHAP) --- */
.result-grid {
    display: grid;
    /* 強制單欄排列，讓卡片上下堆疊 */
    grid-template-columns: 1fr; 
    gap: 25px;
    width: 100%;
}

/* 強制右側所有卡片填滿寬度 */
.layout-right .card {
    width: 100%;
    box-sizing: border-box; 
}

/* 批次分析結果區塊也要填滿 */
#batchResultSection {
    width: 100%;
    display: none; /* 預設隱藏，由 JS 開啟 */
}

/* --- 預測結果圖表 (甜甜圈圖) --- */
/* 修改後：請將 center 改為 stretch */
.score-card {
    display: flex;
    flex-direction: column;
    align-items: stretch; /* 改為 stretch，讓標題能填滿寬度並靠左 */
    width: 100%;
}

.score-card canvas {
    /* 圖表本身限制最大寬度，避免變成巨大的橢圓，但卡片背景是滿版的 */
    max-width: 350px; 
    width: 100%;
    margin: 0 auto;
    display: block;
}

/* --- SHAP 圖表容器 --- */
.shap-container {
    width: 100%;
    min-height: 400px; 
    position: relative;
}

/* --- RWD 手機版適配 --- */
@media (max-width: 1000px) {
    .dashboard-layout {
        grid-template-columns: 1fr; /* 變回單欄，左右變上下 */
    }
    
    .main-content {
        padding: 20px; /* 手機版內縮減少 */
    }
}

/* --- 針對縮短版面的 score-card 優化 --- */

/* 讓內部內容變為橫向排列 */
.score-layout-row {
    display: flex;
    flex-direction: row;       /* 水平排列 */
    align-items: center;       /* 垂直置中 */
    justify-content: center;   /* 水平置中 */
    gap: 10px;                 /* 左右間距 */
    width: 100%;
    padding: 0 10px;
}

/* 左側文字區塊設定 */
.score-info {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex: 1;                   /* 佔據一半空間 */
}

/* 右側圖表區塊設定 (限制高度與寬度) */
.score-chart-container {
    flex: 1;                   /* 佔據一半空間 */
    display: flex;
    justify-content: center;
    align-items: center;
    max-width: 160px;          /* 限制最大寬度 */
    height: 160px;             /* 限制高度，確保版面縮短 */
}

/* 覆寫原本的 canvas 設定，讓它適應較小的容器 */
.score-card canvas {
    max-width: 100% !important;
    max-height: 100% !important;
    width: auto !important;
    height: auto !important;
    margin: 0 !important;
}

/* RWD: 手機版若太窄，可以自動變回直排 (可選) */
@media (max-width: 400px) {
    .score-layout-row {
        flex-direction: column;
    }
}